<!DOCTYPE html>
<html class="h-100"
xmlns:th="http://www.thymeleaf.org"
xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head th:fragment="head">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="icon" type="image/x-icon" th:href="@{/img/favicon.ico}" /><!---->
  <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet"><!---->
  <link th:href="@{/fontawesome/css/all.min.css}" rel="stylesheet"><!---->
  <script th:src="@{/jquery/jquery.min.js}" type="text/javascript"></script>
  <script th:src="@{/js/common.js}" type="text/javascript"></script>
  <script th:src="@{/js/proveedor.js}" type="text/javascript"></script>
  <script th:src="@{/dataTables/datatables.min.js}" type="text/javascript"></script>
  <script src="https://cdn.lordicon.com/bhenfmcm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <link th:href="@{/dataTables/datatables.min.css}" rel="stylesheet"><!---->
  
  
 
  
  <!-- Agregar los scripts de Bootstrap 5 -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  
</head>
<body class="d-flex flex-column h-100">
  <div class="d-grid gap-2 d-md-block">
    <button class="btn btn-sm btn-primary float-start" id="download-button" onclick="generatePDF()">
      <i class="bi bi-arrow-bar-down"></i> Descargar PDF
    </button>
  </div>
  <div id="impresion" style="padding:20px">
    
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <title>Gomería Vera - Reporte de venta</title>    
    </head>
    <body>
      
      <header class="clearfix">        
        <h1 class="text-center mb-6" style="font-family:Trebuchet MS" ><b style= "color:#00008B">Gráfico estadístico de ventas</b></h1> <!--titulo-->        
        <hr>      
        <!-- <span th:text="${titulos}"></span>
        <span th:text="${datos}"></span>
        <span th:text="${titulos}"></span> -->
        <div class="container">
          <div style="height:650px;display:flex;justify-content: center;">
            <canvas id="goodCanvas1" width="50" height="50" aria-label="Hello ARIA World" role="img"></canvas>
  
          </div>

        </div>
        <div>

          <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
          <script th:src="@{/js/convertirPdf.js}" th:inline="javascript"></script>      
          <!-- <script th:src="@{/js/chartJs.js}" th:inline="javascript"></script>-->
          <script type="text/javascript" th:inline="javascript">
            const LISTA_DATOS = /*[[${datos}]]*/ null;
            const listaTitulos =[]
            const listaDatos = []
            for (let elemento of LISTA_DATOS) {
                const {mes,cantidad} = elemento
                listaTitulos.push(`${mes}:${cantidad}`)
                listaDatos.push(cantidad)
            }
            console.table(listaTitulos)
            console.table(listaDatos)
            const DATA_COUNT = 5;
            const NUMBER_CFG = {count: DATA_COUNT, min: 0, max: 100};
            
            const data = {
              // labels: ['Red', 'Orange', 'Yellow', 'Green', 'Blue'],
              labels: listaTitulos,
              datasets: [
                {
                  label: 'Meses',
                  data: listaDatos,
                  backgroundColor: ['#ff6384', '#ff9f40', '#ffcd56', '#4bc0c0', '#36a2eb'], 
                }
              ]
            };
            const config = {
              type: 'doughnut',
              data: data,
              options: {
                responsive: true,
                plugins: {
                  legend: {
                    position: 'top',
                  },
                  // title: {
                  //   display: true,
                  //   text: 'Chart.js Doughnut Chart'
                  // }
                }
              },
            };
            const ctx = document.getElementById('goodCanvas1').getContext('2d');
            new Chart(ctx, config);
          </script>
        </div>
        
        
      </div>  
    </body>
    
    </html>