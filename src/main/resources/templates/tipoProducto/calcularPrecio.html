<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/layout/basic}">
<!-- Incluye la biblioteca Bootstrap -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>

<body>
    <div layout:fragment="content">
        <!--logo personita-->
        <div>
            <img th:src="@{/img/beneficios.png}" class="center wp-image-4532"/> <!--div center img-->
        </div>
        <br> 
        <h1 class="text-center mb-6" style="font-family:Trebuchet MS" ><b style= "color:#21618C">Asignación % de ganancia</b></h1> <!--titulo-->
        <form method="post" th:action="@{/tipoProductos/calcularPrecio/{id}(id=${tipoProducto.idTipoProducto})}" th:object="${tipoProducto}">
            <fieldset>
                <br> <!--separador-->
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-sm-6" > 
                            <div class ="card">                           
                                <div class="card-body">
                                    <div class="card-body">
                                        <script src="https://cdn.lordicon.com/bhenfmcm.js"></script>
                                        <div class="d-flex justify-content-center align-items-center">
                                            <lord-icon
                                            src="https://cdn.lordicon.com/oncyjozz.json"
                                            trigger="hover"
                                            colors="outline:#121331,primary:#646e78"
                                            style="width:60px;height:60px">
                                        </lord-icon>
                                    </div>
                                    <h4 style="color: red; text-align: center;"><strong>ATENCIÓN</strong></h4>
                                    <p style="color: #21618C; text-align: center;">Esta asignación del % tendrá efecto en todos los productos pertenecientes a la misma categoría de ese "Tipo de Producto"</p>
                                    <hr>
                                    <div class="row mb-4">                            
                                        <div class="col">
                                          <div class="form-outline">
                                            <label class="form-label"><strong><i class="bi bi-gear-fill"></i> % Ganancia actual: [[${tipoProducto.ganancia}]]</strong></label>                      
                                            <!--input type="hidden" class="form-control" id="inputNombre2" name="ganancia" th:value="${tDoc.idTipoProducto}"-->   
                                            
                                          </div> 
                                        </div>
                                        <div class="col">
                                            <div class="form-outline">
                                              <label class="form-label"><strong><i class="bi bi-gear-fill"></i> Tip. Producto: [[${tipoProducto.descripcion}]] </strong></label>                      
                                               
                                              
                                            </div> 
                                          </div>
                                      </div>
                                      <div class="row mb-4">
                                        <div class="col">
                                            <div class="form-outline">
                                                <label for="inputGanancia" class="form-label">Promedio de ganancia<span style="color:red">*</span></label>
                                                <input type="text" class="form-control" id="inputGanancia" name="ganancia" placeholder="Introduzca el % de ganancia para el tipo de producto. Por Ej.: 20"  autofocus required>
                                            </div>
                                        </div>
                                    </div>
                                    
                                        <hr>
                                        <div class="row d-flex justify-content-center align-items-center">
                                            <div class="col-sm-3">
                                                <div class="row">
                                                    <div class="col">
                                                        <a href="javascript:void(0);" class="btn btn-secondary w-100" onclick="confirmarRegreso()">
                                                            Atrás
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-8">
                                                <div class="row">
                                                    <div class="col">
                                                        <button type="submit" class="btn btn-info text-white">
                                                            <i class="bi bi-save2" id="download-button"> Guardar %</i>
                                                        </button>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    
                                </div>    <!-- termina el card-->
                                <br>
                                
                                
                            </div>
                            
                        </div>
                        
                        
                    </fieldset>
                </form>
                
                <!--Llamado a funciones js necesarias-->
                <div>
                    <script type="text/javascript" th:inline="javascript">
                        let datos = /*[[${listarProveedor}]]*/ null;
                        let datosProducto = /*[[${listarTipoProducto}]]*/ null;
                    </script>
                    
                    <script th:src="@{/js/confirmarRegreso.js}" type="text/javascript"></script> 
                    <script>
                        const passwordInput = document.getElementById('inputContrasenha');
                        const repeatPasswordInput = document.getElementById('inputRepetirContrasenha');
                        
                        function validatePassword() {
                            if (passwordInput.value !== repeatPasswordInput.value) {
                                repeatPasswordInput.setCustomValidity('Las contraseñas no coinciden');
                            } else {
                                repeatPasswordInput.setCustomValidity('');
                            }
                        }
                        
                        passwordInput.addEventListener('input', validatePassword);
                        repeatPasswordInput.addEventListener('input', validatePassword);
                    </script>
                    <script th:src="@{/js/buscadorTipoProducto.js}" type="text/javascript"></script>
                    
                    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
                    
                </div>            
                
            </div>
            
        </body>
        </html>